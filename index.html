<!DOCTYPE html>
<html>
  <head>
    <title>我的个人简历</title>
	<link rel="stylesheet" href="./a.css">
	<script src="//at.alicdn.com/t/font_881797_9ahi3eg5y0k.js"></script>
	<style type="text/css">
	.loading{width:200px;height:200px;position:relative;}
	.loading::after,.loading::before{content:'';position:absolute;border:1px solid black;width:0px;height:0px;background:black;border-radius:50%;top:0;bottom:0;left:0;right:0;margin: auto;animation: s 1.5s infinite linear;}
	.loading::after{animation-delay:0.8s;}
  
	@keyframes s{
		0%{width:0px;height:0px; opacity:1;}
		100%{width:100px;height:100px; opacity:0;}
	}
		.icon {
		   width: 1em; height: 1em;
		   vertical-align: -0.15em;
		   fill: currentColor;
		   overflow: hidden;
		}
		/* 以上的script和style是为了引入GitHub，微博等平台的小图标 */
		.site-welcome{
			display: none;
			position: fixed;
			top: 0; left: 0; width: 100%; height: 100%;
			background: #888;
			z-index: 1;
			justify-content: center;
			align-items: center;
			/* 两个center就能实现加载的图标居中 */
		}
		.site-welcome.active{
			display: flex;
		}
	</style>
  </head>

  <body> 
	  <div id="siteWelcome" class="site-welcome active">
		<div class="loading"></div>
	  </div>
	  <div id= topNavBar class="topNavBar">
		  <div class="topNavBar-inner clearfix">
				<a class="logo" href="#" alt="logo" style="float:left;">
						<span class="rs">RS</span><span class="card">card</span>
				</a>
				<nav class="menu" style="float: right;">
					<ul class="clearfix">
						<li>
							<a href="#siteAbout">关于</a>
						</li>
						<li>
							<a href="#siteSkills">技能</a>
						</li>
						<li>
							<a href="#">经验</a>
						</li>
						<li>
							<a href="#siteWorks"><span>作品</span></a>
							<ul class="submenu">
								<li>作品1</li>
								<li>作品2</li>
								<li>作品3</li>
							</ul>
						</li>
						<li>
							<a href="#">博客</a>
							<ul class="submenu">
								<li>博客1</li>
								<li>博客2</li>
								<li>博客3</li>
							</ul>
						</li>
						<li>
							<a href="#">日历</a>
						</li>
						<li>
							<a href="#">联系方式</a>
						</li>
						<li>
							<a href="#">其他</a>
						</li>
						</ul>
					</nav>
		  </div>
      </div>
	  <div class="banner">
		  <div class="mask"></div>
	  </div>
	  <main style="">
	  <div data-x id="siteAbout" class="userCard">
		<div class="pictureAndText clearfix">
			<div class="picture">
					<img src="./avatart.jpg" width="299" height="347" alt="头像">
			</div>
			<div class="text">
				<span class="welcome">
					Hello
				<span class=triangle></span>
				</span>
				<h1>小五</h1>
					<p>前端开发工程师</p>
					<hr>
				<dl>
					<dt>年龄</dt>
					<dd>18</dd>
					<dt>所在城市</dt>
					<dd>上海</dd>
					<dt>电话</dt>
					<dd>136123456789</dd>
					<dt>邮箱</dt>
					<dd>2846629226@qq.com</dd>
				</dl>
			</div>
		</div>
		<footer class="media">
			<a href="#">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-github"></use>
				</svg>
			</a>
			<a href="#">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-weibo"></use>
				</svg>
			</a>
			<a href="#">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-twitter"></use>
				</svg>
			</a>
		</footer>	  
	</div>
	<p class="downloadResume-wrapper">
		<a class="downloadResume" href="./resume.pdf" download>下载PDF简历</a>
	</p>
	  <p class="selfIntroduction">
	  wxyzcctv，资深前端工程师。<br>
	     技能：前端开发。
	  </p>
	  </main>
	  <section data-x id="siteSkills" class="skills">
		  <h2>技能</h2>
		  <ol class="clearfix">
			<li>
				<h3>
					HTML 5 &amp; CSS 3
				</h3>
				<div class="progressBar">
					<div class="progress" style="width: 70%;"></div>
				</div>  
			</li>
			<li>
				<h3>
					Javascript
				</h3>
				<div class="progressBar">
					<div class="progress" style="width:65%;"></div>
				</div>  
			</li>
			<li>
				<h3>
					jQuery
				</h3>
				<div class="progressBar">
					<div class="progress" style="width:60%;"></div>
				</div>  
			</li>
			<li>
				<h3>
					Vue.js
				</h3>
				<div class="progressBar">
					<div class="progress" style="width:75%;"></div>
				</div>  
			</li>
			<li>
				<h3>
					React
				</h3>
				<div class="progressBar">
					<div class="progress" style="width:80%;"></div>
				</div>  
			</li>
			<li>
				<h3>
					HTTP
				</h3>
				<div class="progressBar">
					<div class="progress" style="75%;"></div>
				</div>  
			</li>
		  </ol>
	  </section>
	  <section data-x id="siteWorks" class="portfolio">
		  <h2>作品集</h2>
		  <nav>
			  <ol class="clearfix">
				  <li id="portfolio1">所有</li>
				  <li id="portfolio2">框架</li>
				  <li id="portfolio3">原生JS&amp;CSS</li>
			  </ol>
			  <div id="portfolioBar" class="bar state-1">
				<div class="bar-inner"></div>	  
			  </div>
		  </nav>
		  <script>
			  portfolio1.onclick=function(){
				  portfolioBar.className = "bar state-1"
			  }
			  portfolio2.onclick=function(){
				  portfolioBar.className = "bar state-2"
			  }
			  portfolio3.onclick=function(){
				  portfolioBar.className = "bar state-3"
			  }
		  </script>
		  <div class="works" style="height:597px;">
			  <div class="big" style="top:0;left:0;">
				  <img src="./1.jpg" alt="作品1">
			  </div>
			  <div class="small" style="top:0;left: 645px;">
				  <img src="./2.jpg" alt="作品2">
			  </div>
			  <div class="small" style="top:312px;left:645px;">
				  <img src="./3.jpg" alt="作品3">
			  </div>
		  </div>
	  </section>
	  <script src='https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js'></script>
	  <script>
		  //   添加一个延时，使得能够出现加载图标，此处延时时间是1秒
		  //   此处的加载的动画能够将最开始的动画遮盖，可以将这个时候的时间减少
		  setTimeout(function(){
			siteWelcome.classList.remove('active')
		  },1000)
		//   窗口滚动的时候获取一个函数
			let specialTags = document.querySelectorAll('[data-x]')
			for(i=0; i<specialTags.length; i++){
					specialTags[i].classList.add('offset')
				}
			setTimeout(function(){
				findClosets()
			},1000)
		  window.onscroll = function(){
			  if(window.scrollY > 0){
				//   窗口滚动的时候获得一个高度
				topNavBar.classList.add('sticky');
			  }else{
				  topNavBar.classList.remove('sticky')
			  }
			  findClosets()
		  }
		  function findClosets(){
			let specialTags = document.querySelectorAll('[data-x]')
			  let minIndex = 0
			  for(i=1; i<specialTags.length; i++){
				  if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
					  minIndex = i
				  }
			  }
			//   这一段for循环得到的是离浏览器窗口上面距离最小的哪一个标签元素
			//   for(i=0; i<specialTags.length; i++){
			// 	  specialTags[i].classList.remove('active')
			//   }
			// //   这一个for循环是为了将所有的打上标签的元素的class都设置为非active
			// // 结合下面这一句就能实现将得到的最下标签添加active属性
			//   specialTags[minIndex].classList.add('active')
			//   以下程序实现的是当网页界面中出现在某个地方的时候，导航栏对应的那个标签能下面能变红
			  specialTags[minIndex].classList.remove('offset')
			  let id = specialTags[minIndex].id  //得到当前元素的id
			  let a = document.querySelector('a[href="#' + id + '"]') //通过得到的id得到同样id的a标签
			  let li = a.parentNode   //得到a标签的父元素
			  let broutherAndMe = li.parentNode.children   //通过得到li标签的父元素之后在得到子元素，也就是能得到包含li的所有的li标签
			  for(i=0; i<broutherAndMe.length; i++){
				  broutherAndMe[i].classList.remove('highlight')
			  }
			//   for循环将得到的li标签消除active属性
			  li.classList.add('highlight')
			//   此处不是给所有的li都加上active属性，而是将选择到的li加上active属性
		  }
		  let liTags = document.querySelectorAll('nav.menu > ul > li')
		//   上面这一句是为了获得某一个特定的标签
		// document.querySelectorAll，接收一个选择器，返回该选择器对应的所有的元素
		  for(let i=0; i<liTags.length; i++){
			  liTags[i].onmouseenter = function(x){
				// onmouseenter，当鼠标进入某一个元素的时候会触发一个函数
				  x.currentTarget.classList.add('active')
			  }
			  liTags[i].onmouseleave = function(x){
				// onmouseleave，当鼠标离开一个元素的时候会触发一个函数
				x.currentTarget.classList.remove('active')
			  }
		  }
		  function animate(time) {
				requestAnimationFrame(animate);
				TWEEN.update(time);
			}
			requestAnimationFrame(animate);			
		  let aTags = document.querySelectorAll('nav.menu > ul > li > a')
		  for(let i=0; i<aTags.length; i++){
			aTags[i].onclick = function(x){
				x.preventDefault()
				// 阻止浏览器执行a标签的默认跳转
				let a = x.currentTarget
				// a.getAttribute('href')
				// 上面这一句得到的只是a标签中所写的href的值
				let href = a.getAttribute('href')
				let element = document.querySelector(href)
				// 只会获取选择器的的第一个元素，并不是所有的元素
				// 在成功获取锚点之后，通过这个锚点来得到这个元素
				let top = element.offsetTop
				// 得到元素距离页面顶部的绝对距离，这个距离不会随着页面的滑动而发生改变
				// 在得到锚点定位的元素之后就得到距离页面最上面的绝对距离，为页面的跳转做准备
				
				// window.scrollTo(0, top-80)
				// window.scrollTo()实现的是页面的跳转，其中主要有两个参数可以设置
				// 第一个参数是左右的移动距离，第二个参数就是上下的距离
				// console.log(a.href)
				// 上面这一句是直接得到经过浏览器处理的a的href的地址，前面是带有http前缀的
				let currenttop = window.scrollY
				let targettop = top - 80
				let s = targettop - currenttop
				let t = Math.abs((s/100)*300)
				if(t>500){ t=500 }
				// 由于在跳转回上面的位置的时候，s的值就变为负数了，
				// 按照跳转的长度来计算跳转的时间，然而计算时间的时候就必须是正数，
				// 所以这个时候需要加绝对值，当距离太长了，跳转的时间就比较慢了，所以设置最长为5ms
				var coords = { y: currenttop}; 
				// 这个时候不能使用x了，因为改变的时候是改变的页面的上下
				// 设置的初始位置
				var tween = new TWEEN.Tween(coords) 
						.to({ y: targettop}, t)
						// 设置结束位置和动作时间
						.easing(TWEEN.Easing.Quadratic.InOut)
						// 至于这个函数是怎么调用的主要是在GitHub上面的例子找到的
						// 线性的发生变化，慢慢起步，加速，慢慢停止 
						.onUpdate(function() { 
						window.scrollTo(0,coords.y)
						// coords中的y值就是从currenttop到targettop
						})
						.start(); 
			}
		  }
	  </script>
  </body>
</html>
